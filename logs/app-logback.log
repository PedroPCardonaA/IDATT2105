2023-03-21 10:54:49,421 INFO [main] org.springframework.boot.StartupInfoLogger: Starting TokenlyBackendApplication using Java 19.0.2 with PID 13094 (/home/pedroca/Skole/FullStack/IDATT2105/target/classes started by pedroca in /home/pedroca/Skole/FullStack/IDATT2105)
2023-03-21 10:54:49,425 INFO [main] org.springframework.boot.SpringApplication: No active profile set, falling back to 1 default profile: "default"
2023-03-21 10:54:50,310 INFO [main] org.springframework.boot.web.embedded.tomcat.TomcatWebServer: Tomcat initialized with port(s): 8080 (http)
2023-03-21 10:54:50,317 INFO [main] org.apache.juli.logging.DirectJDKLog: Initializing ProtocolHandler ["http-nio-8080"]
2023-03-21 10:54:50,318 INFO [main] org.apache.juli.logging.DirectJDKLog: Starting service [Tomcat]
2023-03-21 10:54:50,318 INFO [main] org.apache.juli.logging.DirectJDKLog: Starting Servlet engine: [Apache Tomcat/10.1.5]
2023-03-21 10:54:50,371 INFO [main] org.apache.juli.logging.DirectJDKLog: Initializing Spring embedded WebApplicationContext
2023-03-21 10:54:50,372 INFO [main] org.springframework.boot.web.servlet.context.ServletWebServerApplicationContext: Root WebApplicationContext: initialization completed in 906 ms
2023-03-21 10:54:50,380 ERROR [main] org.springframework.boot.web.embedded.tomcat.TomcatStarter: Error starting Tomcat context. Exception: org.springframework.beans.factory.BeanCreationException. Message: Error creating bean with name 'h2Console' defined in class path resource [org/springframework/boot/autoconfigure/h2/H2ConsoleAutoConfiguration.class]: Failed to instantiate [org.springframework.boot.web.servlet.ServletRegistrationBean]: Factory method 'h2Console' threw exception with message: Error creating bean with name 'securityConfig' defined in file [/home/pedroca/Skole/FullStack/IDATT2105/target/classes/ntnu/idi/idatt2015/tokenly/backend/config/SecurityConfig.class]: Unsatisfied dependency expressed through constructor parameter 0: Error creating bean with name 'rsa-ntnu.idi.idatt2015.tokenly.backend.security.RsaKeyProperties': Could not bind properties to 'RsaKeyProperties' : prefix=rsa, ignoreInvalidFields=false, ignoreUnknownFields=true
2023-03-21 10:54:50,400 INFO [main] org.apache.juli.logging.DirectJDKLog: Stopping service [Tomcat]
2023-03-21 10:54:50,408 WARN [main] org.springframework.context.support.AbstractApplicationContext: Exception encountered during context initialization - cancelling refresh attempt: org.springframework.context.ApplicationContextException: Unable to start web server
2023-03-21 10:54:50,416 INFO [main] org.springframework.boot.autoconfigure.logging.ConditionEvaluationReportLogger: 

Error starting ApplicationContext. To display the condition evaluation report re-run your application with 'debug' enabled.
2023-03-21 10:54:50,431 ERROR [main] org.springframework.boot.diagnostics.LoggingFailureAnalysisReporter: 

***************************
APPLICATION FAILED TO START
***************************

Description:

Failed to bind properties under 'rsa.public-key' to java.security.interfaces.RSAPublicKey:

    Property: rsa.public-key
    Value: "classpath:certs/public.pem"
    Origin: class path resource [application.properties] - 3:16
    Reason: failed to convert java.lang.String to java.security.interfaces.RSAPublicKey (caused by java.io.FileNotFoundException: class path resource [certs/public.pem] cannot be opened because it does not exist)

Action:

Update your application's configuration

2023-03-21 12:24:53,881 INFO [main] org.springframework.boot.StartupInfoLogger: Starting TokenlyBackendApplication using Java 19.0.2 with PID 15026 (/home/pedroca/Skole/FullStack/IDATT2105/target/classes started by pedroca in /home/pedroca/Skole/FullStack/IDATT2105)
2023-03-21 12:24:53,883 INFO [main] org.springframework.boot.SpringApplication: No active profile set, falling back to 1 default profile: "default"
2023-03-21 12:24:54,596 INFO [main] org.springframework.boot.web.embedded.tomcat.TomcatWebServer: Tomcat initialized with port(s): 8080 (http)
2023-03-21 12:24:54,602 INFO [main] org.apache.juli.logging.DirectJDKLog: Initializing ProtocolHandler ["http-nio-8080"]
2023-03-21 12:24:54,603 INFO [main] org.apache.juli.logging.DirectJDKLog: Starting service [Tomcat]
2023-03-21 12:24:54,603 INFO [main] org.apache.juli.logging.DirectJDKLog: Starting Servlet engine: [Apache Tomcat/10.1.5]
2023-03-21 12:24:54,650 INFO [main] org.apache.juli.logging.DirectJDKLog: Initializing Spring embedded WebApplicationContext
2023-03-21 12:24:54,650 INFO [main] org.springframework.boot.web.servlet.context.ServletWebServerApplicationContext: Root WebApplicationContext: initialization completed in 726 ms
2023-03-21 12:24:54,662 INFO [main] org.springframework.jdbc.datasource.embedded.EmbeddedDatabaseFactory: Starting embedded database: url='jdbc:h2:mem:tokenly-db;DB_CLOSE_DELAY=-1;DB_CLOSE_ON_EXIT=false', username='sa'
2023-03-21 12:24:54,862 INFO [main] org.springframework.boot.autoconfigure.h2.H2ConsoleAutoConfiguration: H2 console available at '/h2-console'. Database available at 'jdbc:h2:mem:tokenly-db'
2023-03-21 12:24:55,463 INFO [main] org.springframework.security.provisioning.JdbcUserDetailsManager: No authentication manager set. Reauthentication of users when changing passwords will not be performed.
2023-03-21 12:24:55,685 INFO [main] org.springframework.security.web.DefaultSecurityFilterChain: Will secure any request with [org.springframework.security.web.session.DisableEncodeUrlFilter@4fb64a52, org.springframework.security.web.context.request.async.WebAsyncManagerIntegrationFilter@70b48eb3, org.springframework.security.web.context.SecurityContextHolderFilter@3a0b6a, org.springframework.security.web.header.HeaderWriterFilter@2055833f, org.springframework.security.web.authentication.logout.LogoutFilter@2cccf134, org.springframework.security.oauth2.server.resource.web.authentication.BearerTokenAuthenticationFilter@3cb6e0ee, org.springframework.security.web.savedrequest.RequestCacheAwareFilter@6f1fa1d0, org.springframework.security.web.servletapi.SecurityContextHolderAwareRequestFilter@71d55b7e, org.springframework.security.web.authentication.AnonymousAuthenticationFilter@7b8ea1db, org.springframework.security.web.session.SessionManagementFilter@6486fe7b, org.springframework.security.web.access.ExceptionTranslationFilter@5939e24, org.springframework.security.web.access.intercept.AuthorizationFilter@68e2d03e]
2023-03-21 12:24:55,813 INFO [main] org.apache.juli.logging.DirectJDKLog: Starting ProtocolHandler ["http-nio-8080"]
2023-03-21 12:24:55,823 INFO [main] org.springframework.boot.web.embedded.tomcat.TomcatWebServer: Tomcat started on port(s): 8080 (http) with context path ''
2023-03-21 12:24:55,831 INFO [main] org.springframework.boot.StartupInfoLogger: Started TokenlyBackendApplication in 2.207 seconds (process running for 2.767)
2023-03-21 13:17:21,834 INFO [main] org.springframework.boot.StartupInfoLogger: Starting TokenlyBackendApplication using Java 19.0.1 with PID 11144 (C:\Users\Anders\IdeaProjects\Fullstack\tokenly-backend\target\classes started by Anders in C:\Users\Anders\IdeaProjects\Fullstack\tokenly-backend)
2023-03-21 13:17:21,837 INFO [main] org.springframework.boot.SpringApplication: No active profile set, falling back to 1 default profile: "default"
2023-03-21 13:17:23,527 INFO [main] org.springframework.boot.web.embedded.tomcat.TomcatWebServer: Tomcat initialized with port(s): 8080 (http)
2023-03-21 13:17:23,547 INFO [main] org.apache.juli.logging.DirectJDKLog: Initializing ProtocolHandler ["http-nio-8080"]
2023-03-21 13:17:23,549 INFO [main] org.apache.juli.logging.DirectJDKLog: Starting service [Tomcat]
2023-03-21 13:17:23,550 INFO [main] org.apache.juli.logging.DirectJDKLog: Starting Servlet engine: [Apache Tomcat/10.1.5]
2023-03-21 13:17:23,696 INFO [main] org.apache.juli.logging.DirectJDKLog: Initializing Spring embedded WebApplicationContext
2023-03-21 13:17:23,696 INFO [main] org.springframework.boot.web.servlet.context.ServletWebServerApplicationContext: Root WebApplicationContext: initialization completed in 1762 ms
2023-03-21 13:17:23,721 INFO [main] org.springframework.jdbc.datasource.embedded.EmbeddedDatabaseFactory: Starting embedded database: url='jdbc:h2:mem:tokenly-db;DB_CLOSE_DELAY=-1;DB_CLOSE_ON_EXIT=false', username='sa'
2023-03-21 13:17:24,120 INFO [main] org.springframework.boot.autoconfigure.h2.H2ConsoleAutoConfiguration: H2 console available at '/h2-console'. Database available at 'jdbc:h2:mem:tokenly-db'
2023-03-21 13:17:25,364 WARN [main] org.springframework.context.support.AbstractApplicationContext: Exception encountered during context initialization - cancelling refresh attempt: org.springframework.beans.factory.UnsatisfiedDependencyException: Error creating bean with name 'authController' defined in file [C:\Users\Anders\IdeaProjects\Fullstack\tokenly-backend\target\classes\ntnu\idi\idatt2015\tokenly\backend\controller\AuthController.class]: Unsatisfied dependency expressed through constructor parameter 1: Error creating bean with name 'authManager' defined in class path resource [ntnu/idi/idatt2015/tokenly/backend/security/SecurityConfig.class]: Unsatisfied dependency expressed through method 'authManager' parameter 0: No qualifying bean of type 'org.springframework.security.core.userdetails.UserDetailsService' available: expected single matching bean but found 2: users,userDetails
2023-03-21 13:17:25,365 INFO [main] org.springframework.jdbc.datasource.embedded.EmbeddedDatabaseFactory: Shutting down embedded database: url='jdbc:h2:mem:tokenly-db;DB_CLOSE_DELAY=-1;DB_CLOSE_ON_EXIT=false'
2023-03-21 13:17:25,590 INFO [main] org.apache.juli.logging.DirectJDKLog: Stopping service [Tomcat]
2023-03-21 13:17:25,613 INFO [main] org.springframework.boot.autoconfigure.logging.ConditionEvaluationReportLogger: 

Error starting ApplicationContext. To display the condition evaluation report re-run your application with 'debug' enabled.
2023-03-21 13:17:25,644 ERROR [main] org.springframework.boot.diagnostics.LoggingFailureAnalysisReporter: 

***************************
APPLICATION FAILED TO START
***************************

Description:

Parameter 0 of method authManager in ntnu.idi.idatt2015.tokenly.backend.security.SecurityConfig required a single bean, but 2 were found:
	- users: defined by method 'users' in class path resource [ntnu/idi/idatt2015/tokenly/backend/security/SecurityConfig.class]
	- userDetails: defined by method 'userDetails' in class path resource [ntnu/idi/idatt2015/tokenly/backend/security/SecurityConfig.class]


Action:

Consider marking one of the beans as @Primary, updating the consumer to accept multiple beans, or using @Qualifier to identify the bean that should be consumed

2023-03-21 13:20:58,177 INFO [main] org.springframework.boot.StartupInfoLogger: Starting TokenlyBackendApplication using Java 19.0.1 with PID 19292 (C:\Users\Anders\IdeaProjects\Fullstack\tokenly-backend\target\classes started by Anders in C:\Users\Anders\IdeaProjects\Fullstack\tokenly-backend)
2023-03-21 13:20:58,180 INFO [main] org.springframework.boot.SpringApplication: No active profile set, falling back to 1 default profile: "default"
2023-03-21 13:20:59,511 INFO [main] org.springframework.boot.web.embedded.tomcat.TomcatWebServer: Tomcat initialized with port(s): 8080 (http)
2023-03-21 13:20:59,523 INFO [main] org.apache.juli.logging.DirectJDKLog: Initializing ProtocolHandler ["http-nio-8080"]
2023-03-21 13:20:59,524 INFO [main] org.apache.juli.logging.DirectJDKLog: Starting service [Tomcat]
2023-03-21 13:20:59,525 INFO [main] org.apache.juli.logging.DirectJDKLog: Starting Servlet engine: [Apache Tomcat/10.1.5]
2023-03-21 13:20:59,624 INFO [main] org.apache.juli.logging.DirectJDKLog: Initializing Spring embedded WebApplicationContext
2023-03-21 13:20:59,625 INFO [main] org.springframework.boot.web.servlet.context.ServletWebServerApplicationContext: Root WebApplicationContext: initialization completed in 1386 ms
2023-03-21 13:20:59,643 INFO [main] org.springframework.jdbc.datasource.embedded.EmbeddedDatabaseFactory: Starting embedded database: url='jdbc:h2:mem:tokenly-db;DB_CLOSE_DELAY=-1;DB_CLOSE_ON_EXIT=false', username='sa'
2023-03-21 13:20:59,994 INFO [main] org.springframework.boot.autoconfigure.h2.H2ConsoleAutoConfiguration: H2 console available at '/h2-console'. Database available at 'jdbc:h2:mem:tokenly-db'
2023-03-21 13:21:01,440 WARN [main] org.springframework.context.support.AbstractApplicationContext: Exception encountered during context initialization - cancelling refresh attempt: org.springframework.beans.factory.UnsatisfiedDependencyException: Error creating bean with name 'authController' defined in file [C:\Users\Anders\IdeaProjects\Fullstack\tokenly-backend\target\classes\ntnu\idi\idatt2015\tokenly\backend\controller\AuthController.class]: Unsatisfied dependency expressed through constructor parameter 1: Error creating bean with name 'authManager' defined in class path resource [ntnu/idi/idatt2015/tokenly/backend/security/SecurityConfig.class]: Unsatisfied dependency expressed through method 'authManager' parameter 0: No qualifying bean of type 'org.springframework.security.core.userdetails.UserDetailsService' available: expected single matching bean but found 2: users,userDetails
2023-03-21 13:21:01,441 INFO [main] org.springframework.jdbc.datasource.embedded.EmbeddedDatabaseFactory: Shutting down embedded database: url='jdbc:h2:mem:tokenly-db;DB_CLOSE_DELAY=-1;DB_CLOSE_ON_EXIT=false'
2023-03-21 13:21:01,662 INFO [main] org.apache.juli.logging.DirectJDKLog: Stopping service [Tomcat]
2023-03-21 13:21:01,681 INFO [main] org.springframework.boot.autoconfigure.logging.ConditionEvaluationReportLogger: 

Error starting ApplicationContext. To display the condition evaluation report re-run your application with 'debug' enabled.
2023-03-21 13:21:01,709 ERROR [main] org.springframework.boot.diagnostics.LoggingFailureAnalysisReporter: 

***************************
APPLICATION FAILED TO START
***************************

Description:

Parameter 0 of method authManager in ntnu.idi.idatt2015.tokenly.backend.security.SecurityConfig required a single bean, but 2 were found:
	- users: defined by method 'users' in class path resource [ntnu/idi/idatt2015/tokenly/backend/security/SecurityConfig.class]
	- userDetails: defined by method 'userDetails' in class path resource [ntnu/idi/idatt2015/tokenly/backend/security/SecurityConfig.class]


Action:

Consider marking one of the beans as @Primary, updating the consumer to accept multiple beans, or using @Qualifier to identify the bean that should be consumed

2023-03-21 13:21:32,654 INFO [main] org.springframework.boot.StartupInfoLogger: Starting TokenlyBackendApplication using Java 19.0.1 with PID 6616 (C:\Users\Anders\IdeaProjects\Fullstack\tokenly-backend\target\classes started by Anders in C:\Users\Anders\IdeaProjects\Fullstack\tokenly-backend)
2023-03-21 13:21:32,657 INFO [main] org.springframework.boot.SpringApplication: No active profile set, falling back to 1 default profile: "default"
2023-03-21 13:21:33,687 INFO [main] org.springframework.boot.web.embedded.tomcat.TomcatWebServer: Tomcat initialized with port(s): 8080 (http)
2023-03-21 13:21:33,696 INFO [main] org.apache.juli.logging.DirectJDKLog: Initializing ProtocolHandler ["http-nio-8080"]
2023-03-21 13:21:33,697 INFO [main] org.apache.juli.logging.DirectJDKLog: Starting service [Tomcat]
2023-03-21 13:21:33,698 INFO [main] org.apache.juli.logging.DirectJDKLog: Starting Servlet engine: [Apache Tomcat/10.1.5]
2023-03-21 13:21:33,785 INFO [main] org.apache.juli.logging.DirectJDKLog: Initializing Spring embedded WebApplicationContext
2023-03-21 13:21:33,785 INFO [main] org.springframework.boot.web.servlet.context.ServletWebServerApplicationContext: Root WebApplicationContext: initialization completed in 1075 ms
2023-03-21 13:21:33,801 INFO [main] org.springframework.jdbc.datasource.embedded.EmbeddedDatabaseFactory: Starting embedded database: url='jdbc:h2:mem:tokenly-db;DB_CLOSE_DELAY=-1;DB_CLOSE_ON_EXIT=false', username='sa'
2023-03-21 13:21:34,036 INFO [main] org.springframework.boot.autoconfigure.h2.H2ConsoleAutoConfiguration: H2 console available at '/h2-console'. Database available at 'jdbc:h2:mem:tokenly-db'
2023-03-21 13:21:35,191 INFO [main] org.springframework.security.provisioning.JdbcUserDetailsManager: No authentication manager set. Reauthentication of users when changing passwords will not be performed.
2023-03-21 13:21:35,599 INFO [main] org.springframework.security.web.DefaultSecurityFilterChain: Will secure any request with [org.springframework.security.web.session.DisableEncodeUrlFilter@9b367c8, org.springframework.security.web.context.request.async.WebAsyncManagerIntegrationFilter@34c62fdf, org.springframework.security.web.context.SecurityContextHolderFilter@2017f6e6, org.springframework.security.web.header.HeaderWriterFilter@2c9fdb64, org.springframework.security.web.authentication.logout.LogoutFilter@7d484fcd, org.springframework.security.oauth2.server.resource.web.authentication.BearerTokenAuthenticationFilter@256589a1, org.springframework.security.web.savedrequest.RequestCacheAwareFilter@79ca7bea, org.springframework.security.web.servletapi.SecurityContextHolderAwareRequestFilter@147cc940, org.springframework.security.web.authentication.AnonymousAuthenticationFilter@3de79067, org.springframework.security.web.session.SessionManagementFilter@61da0413, org.springframework.security.web.access.ExceptionTranslationFilter@624b3544, org.springframework.security.web.access.intercept.AuthorizationFilter@26b3c9a2]
2023-03-21 13:21:35,772 INFO [main] org.apache.juli.logging.DirectJDKLog: Starting ProtocolHandler ["http-nio-8080"]
2023-03-21 13:21:35,791 INFO [main] org.springframework.boot.web.embedded.tomcat.TomcatWebServer: Tomcat started on port(s): 8080 (http) with context path ''
2023-03-21 13:21:35,801 INFO [main] org.springframework.boot.StartupInfoLogger: Started TokenlyBackendApplication in 3.622 seconds (process running for 4.711)
2023-03-21 13:22:57,858 INFO [SpringApplicationShutdownHook] org.springframework.jdbc.datasource.embedded.EmbeddedDatabaseFactory: Shutting down embedded database: url='jdbc:h2:mem:tokenly-db;DB_CLOSE_DELAY=-1;DB_CLOSE_ON_EXIT=false'
2023-03-21 13:23:24,283 INFO [main] org.springframework.boot.StartupInfoLogger: Starting TokenlyBackendApplication using Java 19.0.1 with PID 15040 (C:\Users\Anders\IdeaProjects\Fullstack\tokenly-backend\target\classes started by Anders in C:\Users\Anders\IdeaProjects\Fullstack\tokenly-backend)
2023-03-21 13:23:24,286 INFO [main] org.springframework.boot.SpringApplication: No active profile set, falling back to 1 default profile: "default"
2023-03-21 13:23:25,385 INFO [main] org.springframework.boot.web.embedded.tomcat.TomcatWebServer: Tomcat initialized with port(s): 8080 (http)
2023-03-21 13:23:25,394 INFO [main] org.apache.juli.logging.DirectJDKLog: Initializing ProtocolHandler ["http-nio-8080"]
2023-03-21 13:23:25,395 INFO [main] org.apache.juli.logging.DirectJDKLog: Starting service [Tomcat]
2023-03-21 13:23:25,396 INFO [main] org.apache.juli.logging.DirectJDKLog: Starting Servlet engine: [Apache Tomcat/10.1.5]
2023-03-21 13:23:25,482 INFO [main] org.apache.juli.logging.DirectJDKLog: Initializing Spring embedded WebApplicationContext
2023-03-21 13:23:25,482 INFO [main] org.springframework.boot.web.servlet.context.ServletWebServerApplicationContext: Root WebApplicationContext: initialization completed in 1128 ms
2023-03-21 13:23:25,497 INFO [main] org.springframework.jdbc.datasource.embedded.EmbeddedDatabaseFactory: Starting embedded database: url='jdbc:h2:mem:tokenly-db;DB_CLOSE_DELAY=-1;DB_CLOSE_ON_EXIT=false', username='sa'
2023-03-21 13:23:25,730 INFO [main] org.springframework.boot.autoconfigure.h2.H2ConsoleAutoConfiguration: H2 console available at '/h2-console'. Database available at 'jdbc:h2:mem:tokenly-db'
2023-03-21 13:23:26,574 INFO [main] org.springframework.security.provisioning.JdbcUserDetailsManager: No authentication manager set. Reauthentication of users when changing passwords will not be performed.
2023-03-21 13:23:26,926 INFO [main] org.springframework.security.web.DefaultSecurityFilterChain: Will secure any request with [org.springframework.security.web.session.DisableEncodeUrlFilter@6cdee57, org.springframework.security.web.context.request.async.WebAsyncManagerIntegrationFilter@482f7af0, org.springframework.security.web.context.SecurityContextHolderFilter@61b60600, org.springframework.security.web.header.HeaderWriterFilter@61da0413, org.springframework.security.web.authentication.logout.LogoutFilter@5384ce66, org.springframework.security.oauth2.server.resource.web.authentication.BearerTokenAuthenticationFilter@4863c8ac, org.springframework.security.web.savedrequest.RequestCacheAwareFilter@340afaf8, org.springframework.security.web.servletapi.SecurityContextHolderAwareRequestFilter@4fb57fb3, org.springframework.security.web.authentication.AnonymousAuthenticationFilter@1edfedf1, org.springframework.security.web.session.SessionManagementFilter@5122e4bf, org.springframework.security.web.access.ExceptionTranslationFilter@21274afe, org.springframework.security.web.access.intercept.AuthorizationFilter@4b4969ea]
2023-03-21 13:23:27,086 INFO [main] org.apache.juli.logging.DirectJDKLog: Starting ProtocolHandler ["http-nio-8080"]
2023-03-21 13:23:27,105 INFO [main] org.springframework.boot.web.embedded.tomcat.TomcatWebServer: Tomcat started on port(s): 8080 (http) with context path ''
2023-03-21 13:23:27,112 INFO [main] org.springframework.boot.StartupInfoLogger: Started TokenlyBackendApplication in 3.272 seconds (process running for 4.267)
2023-03-21 13:24:05,762 INFO [SpringApplicationShutdownHook] org.springframework.jdbc.datasource.embedded.EmbeddedDatabaseFactory: Shutting down embedded database: url='jdbc:h2:mem:tokenly-db;DB_CLOSE_DELAY=-1;DB_CLOSE_ON_EXIT=false'
